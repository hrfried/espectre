# ESPectre - ESP32-C5 Configuration
# WiFi CSI-based motion detection with Home Assistant integration
#
# Made for ESPHome - https://github.com/francescopace/espectre
#
# ⚠️ EXPERIMENTAL: This platform has NOT been tested yet.
# ESP32-C5 uses the same modern CSI API as ESP32-C6 with WiFi 6 support.
# Please report your results on GitHub Discussions!
#
# Compatible boards:
# - ESP32-C5-DevKitC
# - ESP32-C5-DevKitM
# - Any ESP32-C5 board
#
# Provisioning:
# - Via BLE: Use the ESPHome app or Home Assistant companion app
# - Via WiFi: Connect to "ESPectre Fallback" AP and configure
# Note: USB provisioning (improv_serial) not yet supported on ESP32-C5

esphome:
  name: espectre
  friendly_name: ESPectre
  name_add_mac_suffix: true
  project:
    name: francescopace.espectre
    version: "1.0.0"

esp32:
  variant: ESP32C5
  framework:
    type: esp-idf
    version: 5.5.1
    sdkconfig_options:
      # Power Management (critical for CSI reliability)
      CONFIG_PM_ENABLE: n                             # Disable all power management
      CONFIG_ESP_WIFI_STA_DISCONNECTED_PM_ENABLE: n   # No power save when disconnected
      # CSI Feature
      CONFIG_ESP_WIFI_CSI_ENABLED: y                  # Enable CSI extraction from WiFi packets
      CONFIG_ESP_WIFI_11AX_SUPPORT: y                 # Enable WiFi 6 (802.11ax)

# Load ESPectre component from GitHub
external_components:
  - source:
      type: git
      url: https://github.com/francescopace/espectre
      ref: main
    components: [ espectre ]
    refresh: always

# ESPectre - WiFi CSI Motion Detection
espectre:
  id: espectre_csi

# Dashboard import for easy adoption
dashboard_import:
  package_import_url: github://francescopace/espectre/examples/espectre-c5.yaml@main
  import_full_config: true

# WiFi with fallback AP for provisioning
wifi:
  ap:
    ssid: "ESPectre Fallback"

captive_portal:

# Improv provisioning via BLE
esp32_improv:
  authorizer: none

# Note: improv_serial is not yet supported on ESP32-C5

# Logging
logger:

# Home Assistant API
api:

# OTA updates
ota:
  - platform: esphome
