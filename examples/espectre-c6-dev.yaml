# ESPectre - ESP32-C6 Development Configuration
# WiFi CSI-based motion detection - LOCAL DEVELOPMENT VERSION
#
# This file uses local components for development.
# For production use, see espectre-c6.yaml (uses GitHub source).
#
# Usage:
# 1. Clone the repository: git clone https://github.com/francescopace/espectre.git
# 2. cd espectre
# 3. Create secrets.yaml with wifi_ssid and wifi_password
# 4. Run: esphome run examples/espectre-c6-dev.yaml

esphome:
  name: espectre
  friendly_name: ESPectre Dev

esp32:
  variant: ESP32C6
  framework:
    type: esp-idf
    version: 5.5.1
    sdkconfig_options:
      # Power Management (critical for CSI reliability)
      CONFIG_PM_ENABLE: n                             # Disable all power management
      CONFIG_ESP_WIFI_STA_DISCONNECTED_PM_ENABLE: n   # No power save when disconnected
      # CSI Feature
      CONFIG_ESP_WIFI_CSI_ENABLED: y                  # Enable CSI extraction from WiFi packets
      CONFIG_ESP_WIFI_11AX_SUPPORT: y                 # Enable WiFi 6 (802.11ax)

# Local component for development
external_components:
  - source:
      type: local
      path: ../components
    components: [ espectre ]

# ESPectre - WiFi CSI Motion Detection
# All parameters shown with defaults
espectre:
  id: espectre_csi
  # Motion detection
  traffic_generator_rate: 100   # Packets/sec for CSI generation (0-1000)
  segmentation_threshold: 1.0   # Motion sensitivity: lower=more sensitive (0.5-10.0)
  segmentation_window_size: 50  # Analysis window size in packets (10-200)
  # Hampel filter (anti-turbulence)
  hampel_enabled: true          # Enable outlier removal filter
  hampel_window: 7              # Filter window size (3-11, odd numbers)
  hampel_threshold: 4.0         # Outlier detection threshold (1.0-10.0)
  # Subcarrier selection (optional - leave commented for auto-calibration at boot)
  # selected_subcarriers: [6, 7, 8, 20, 21, 22, 35, 36, 50, 51, 52, 53]

# WiFi (using secrets for development)
wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password

# Logging (DEBUG level for development)
logger:
  level: DEBUG
  logs:
    sensor: INFO
    binary_sensor: INFO

# Home Assistant API
api:

# OTA updates
ota:
  - platform: esphome

# Debug sensors for development
debug:
  update_interval: 5s

sensor:
  - platform: debug
    free:
      name: "Free Heap"
    block:
      name: "Max Free Block"
    loop_time:
      name: "Loop Time"

text_sensor:
  - platform: debug
    device:
      name: "Device Info"
    reset_reason:
      name: "Reset Reason"
